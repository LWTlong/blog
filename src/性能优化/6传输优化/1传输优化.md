---
title: 传输优化
order: 1
#article: false
category:
  - 性能优化
tag:
  - 传输优化
---

## gzip 压缩

nginx 开启 gzip 配置:

```nginx
    # 开启 gzip
    gzip on;

    # 至少 1k 才进行压缩，可以直接写 1k
    gzip_min_length 1024;

    # 压缩级别，1-9，9 最慢，压缩最好，但增加 cpu 负载, 一般用6 比较均衡
    gzip_comp_level 6;

    # 在响应头添加上 vary 的属性，告诉客户端启用了 gzip 压缩
    gzip_vary on;

    # 优化压缩缓冲区，一般默认即可
    gzip_buffer 4 16k;

    # 对已经压缩的资源直接利用
    gzip_static on;

    # 压缩使用的 http 版本
    gzip_http_version 1.1;

    # 压缩类型
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
    
```


## 启用 keep-Alive

keep-alive 可以减少 tcp 连接的建立和断开，从而减少延迟和带宽的消耗。

nginx 开启 keep-alive 配置:

```nginx
    # 开启 keep-alive 这里单位是秒，超过65秒没有活动连接，就断开
    keepalive_timeout 65;

    # 每个连接最大请求数 这里意思就是超过100次请求，就要重新建立tcp连接
    keepalive_requests 100;
```